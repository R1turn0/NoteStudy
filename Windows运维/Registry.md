# 注册表（Registry）

​		从Windows95系统后，微软公司用于代替原先Win32系统里的.ini文件，管理配置系统运行参数的一个全新的核心数据库。

​		注册表内整合集成了**全部系统和应用程序**的初始化信息。



**一. 注册表内容**

1. 软硬件配置和状态信息，应用程序和资源管理器外壳的初始条件、首选项和卸载数据；
2. 计算机系统的设置和许可，文件扩展名和应用程序的关联，硬件的描述、状态和属性；
3. 计算机性能记录以及底层系统状态信息；
4. 其他各类数据



**二. 注册表结构**

​		Windows注册表由二进制数据System.dat和User.dat组成。

​		System.dat包含系统硬件和软件设置

​		User.dat保存用户相关信息 ，例如资源管理器设置、颜色方案以及网络口令等。



​		KEY：主键，以HKEY开头

​				SubKEY：次主键，

​						Value：键值，由键值名称(Value Name)和数据(Value Data)组成。



**注册表中各分支功能：**

| 主键                | 功能                                                         |
| ------------------- | ------------------------------------------------------------ |
| HKEY-CLASSES-ROOT   | 文件扩展名与应用的关联及OLE信息                              |
| HKEY-CURRENT-USER   | 当前登录用户控制面板选项和桌面等的设置，以及映射的网络驱动器 |
| HKEY-LOCAL-MACHINE  | 计算机硬件与应用程序信息                                     |
| HKEY-USERS          | 所有登录用户信息                                             |
| HKEY-CURRENT-CONFIG | 计算机硬件配置信息                                           |
| HKEY-DYN-DATA(*)    | 即插即用和系统性能的动态信息                                 |

*OLE(Object Linking and mbedding -- 对象链接与嵌入)*



**三. 注册表中的键值项数据**

​		注册表通过键和子健来管理各种信息。注册表中所有的信息都是以各种形式的键值项数据保存的。

1. **字符串值**

   字符串值一般用来表示文件的描述和硬件的标识。通常由字母和数字组成，也可以是汉字，最大长度不能超过255个字节。

2. **二进制值**

   二进制值没有长度限制，可以是任意字节长。在注册表编辑器中以十六进制的方式表示。

3. **DWORD值**

   DWORD值是一个32位（4个字节）的数值。在注册表编辑器中也是以十六进制的方式表示。



**四. 注册表的备份与恢复**

​		为了确保Windows系统安全，必须经常备份注册表。

备份：

1. 直接复制进行备份以及恢复
2. 利用Regedit.exe备份



**五. 注册表修改方法**

1. **软件修改（安全）**

    通过一些专门的修改工具来修改注册表，比如：  MagicSet 、 TweakUI 、 WinHacker  等等。其实  控制面板  就是一个这样的工具，只不过功能简单一些。 

2. **间接修改**

   将要修改的写入一个  文件中，然后导入注册表中。 

    文件的基本格式为： 

   ```
    REGEDIT4 
   
    [HKEY_LOCAL_MACHINE\Software\Super Rabbit\MagicSet] 
   
    "@"="Super Rabbit Magic Set For Windows 98 V2.92" 
   
    "a"=dword:00000001 
   
    "b"=hex:02,05,00,00 
   
   ……
   ```

   第一行"REGEDIT4"必须大写

   第二行为空行

   第三行使用[]扩起子健分支，其中HEKEY_LOCAL_MACHINE\Software\Super Rabbit\MagicSet就是一个分支

   第四、五、六……行子健下的设置数据。其中@表示之策表编辑器右边窗格中的“默认”

3. **直接修改**

   ​		通过注册表编辑器直接修改注册表的键值数据项，这样做会避免在注册表中留下垃圾  虽然都很小，但越来越多会拖慢系统速度，但是要求用户有一定的注册表知识，熟悉注册表内部结构而且一定要小心谨慎。 

 